<nav class=" flex  justify-between p-2 bg-primary text-neutral">
    <h3 class="font-bold text-3xl">Gemini API</h3> 
    <div class="p-1 gap-2">
         <fa-icon class="text-secondary" [icon]="faUser"></fa-icon>
    </div>
</nav>
<div class="container w-full  mt-2 mx-auto border-4 rounded-md relative bg-neutral   h-[90vh]  ms:w-2/5 ">
    <!-- <div class="bg-cyan-700 text-center p-4">
        <h2 class="text-white font-bold text-3xl">Chat with Friends</h2>
    </div> -->
    <div class="chat-message  max-h-[80%] overflow-x-auto" #container>
        <h2 class="p-1 text-center text-neutral ">Bienvenue dans Gemini API </h2>
        @for (message of messageList; track $index) {
            <div class="message received">
                <span class="sender"></span> {{message.clientMessage}}
            </div>
            <div class="message sent flex">
               
                    <div class="w-20 h-20">
                        <svg  fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M16 8.016A8.522 8.522 0 008.016 16h-.032A8.521 8.521 0 000 8.016v-.032A8.521 8.521 0 007.984 0h.032A8.522 8.522 0 0016 7.984v.032z" fill="url(#prefix__paint0_radial_980_20147)"/><defs><radialGradient id="prefix__paint0_radial_980_20147" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(16.1326 5.4553 -43.70045 129.2322 1.588 6.503)"><stop offset=".067" stop-color="#9168C0"/><stop offset=".343" stop-color="#5684D1"/><stop offset=".672" stop-color="#1BA1E3"/></radialGradient></defs></svg>
                    </div>
                    <p class="sender  text-neutral" [innerHTML]="message.geminiResponse"></p>

            </div>
        }
        <div class="message received">
            <span class="sender"></span> {{chat}}
        </div>
        <div class="message sent flex">
            <!-- @if(!isLoading){  -->
                <div *ngIf="!isLoading"  class="w-20 h-20">
                    <svg  fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M16 8.016A8.522 8.522 0 008.016 16h-.032A8.521 8.521 0 000 8.016v-.032A8.521 8.521 0 007.984 0h.032A8.522 8.522 0 0016 7.984v.032z" fill="url(#prefix__paint0_radial_980_20147)"/><defs><radialGradient id="prefix__paint0_radial_980_20147" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(16.1326 5.4553 -43.70045 129.2322 1.588 6.503)"><stop offset=".067" stop-color="#9168C0"/><stop offset=".343" stop-color="#5684D1"/><stop offset=".672" stop-color="#1BA1E3"/></radialGradient></defs></svg>
                </div>
                <p *ngIf="!isLoading" class="sender  text-gray-700" [innerHTML]="text"></p>
            <!-- } -->
            <!-- @else {  -->
                   <div *ngIf="isLoading" class="flex w-full items-center">
                    <div class="  spin-slower h-14  w-14 mr-3" >
                        <svg *ngIf="isLoading" class="animate-pulse" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M16 8.016A8.522 8.522 0 008.016 16h-.032A8.521 8.521 0 000 8.016v-.032A8.521 8.521 0 007.984 0h.032A8.522 8.522 0 0016 7.984v.032z" fill="url(#prefix__paint0_radial_980_20147)"/><defs><radialGradient id="prefix__paint0_radial_980_20147" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(16.1326 5.4553 -43.70045 129.2322 1.588 6.503)"><stop offset=".067" stop-color="#9168C0"/><stop offset=".343" stop-color="#5684D1"/><stop offset=".672" stop-color="#1BA1E3"/></radialGradient></defs></svg>
                    </div>
                    <div class=" shadow rounded-md p-4 max-w-lg w-full mx-auto">
                        <div class="animate-pulse flex space-x-4">
                          <div class="rounded-full bg-slate-500 h-10 w-10"></div>
                          <div class="flex-1 space-y-6 py-1">
                            <div class="h-2 bg-slate-500 w-10  xl:w-96 rounded"></div>
                            <div class="space-y-3">
                              <div class="grid  grid-cols-3 gap-4">
                                <div class="h-2 bg-slate-500  rounded col-span-2"></div>
                                <div class="h-2 bg-slate-500 rounded col-span-1"></div>
                              </div>
                              <div class="h-2 bg-slate-500 rounded"></div>
                            </div>
                          </div>
                        </div>
                      </div>
                   </div>
                    
                    <p *ngIf="isLoading" class="sender">
                   </p>
            <!-- } -->
            <!-- <span class="sender">{{chat}}</span>  -->
        </div>
       
        <!-- Add more messages here -->
    </div>
    <div class="absolute w-4/5  bottom-0 left-0 right-0 m-3">
        <!-- a tailwind styled input -->
       
      <input #message class="w-3/4 h-12 p-2 border border-cyan-300 rounded outline-cyan-200"  type="text" placeholder="Type your message...">
       <!--A tailwind style butto7n-->
       <button class="bg-secondary translate-x-0 hover:translate-x-1 transition duration-300 hover:scale-110 text-neutral font-bold p-3 m-2 rounded" (click)="TestGeminiChat()">
        Send
     </button>
    </div>
</div>